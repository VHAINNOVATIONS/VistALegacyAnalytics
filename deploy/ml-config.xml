<configuration
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

  <!--
      Only enable the task server section if you need to.
      <task-server xmlns="http://marklogic.com/xdmp/group"
      xsi:schemaLocation="http://marklogic.com/xdmp/group group.xsd">
      <threads>16</threads>
      <debug-threads>16</debug-threads>
      <max-time-limit>3600</max-time-limit>
      <default-time-limit>600</default-time-limit>
      <queue-size>100000</queue-size>
      <pre-commit-trigger-depth>1000</pre-commit-trigger-depth>
      <post-commit-trigger-depth>1000</post-commit-trigger-depth>
      <pre-commit-trigger-limit>10000</pre-commit-trigger-limit>
      <log-errors>true</log-errors>
      <debug-allow>true</debug-allow>
      <profile-allow>true</profile-allow>
      <scheduled-tasks/>
      </task-server>
  -->
  <http-servers
      xmlns="http://marklogic.com/xdmp/group"
      xsi:schemaLocation="http://marklogic.com/xdmp/group group.xsd">
    <!--Default Application Server-->
    <http-server>
      <http-server-name>@ml.app-port-@ml.app-name</http-server-name>
      <port>@ml.app-port</port>
      <database name="@ml.content-db"/>
      <modules name="@ml.app-modules-db"/>
      <root>@ml.modules-root</root>
      <authentication>@ml.authentication-method</authentication>
      <ssl-certificate-template>@ml.ssl-certificate-template</ssl-certificate-template>
      <ssl-require-client-certificate>@ml.ssl-require-client-certificate</ssl-require-client-certificate>
      <default-user name="@ml.default-user"/>
      <url-rewriter>@ml.url-rewriter</url-rewriter>
      <error-handler>@ml.error-handler</error-handler>
      <collation>http://marklogic.com/collation/codepoint</collation>
      <namespaces
          xmlns="http://marklogic.com/xdmp/group"
          xsi:schemaLocation="http://marklogic.com/xdmp/group group.xsd">
        <namespace>
          <prefix>va</prefix>
          <namespace-uri>ns://va.gov/2012/ip401</namespace-uri>
        </namespace>
        <!-- This is a fake namespace to signal the current environment. -->
        <namespace>
          <prefix>_roxy_environment</prefix>
          <namespace-uri>ns://va.gov/2012/ip401/properties/environment/@environment</namespace-uri>
        </namespace>
      </namespaces>
    </http-server>
    @ml.test-appserver
  </http-servers>

  <xdbc-servers
      xmlns="http://marklogic.com/xdmp/group"
      xsi:schemaLocation="http://marklogic.com/xdmp/group group.xsd">
    <xdbc-server>
      <xdbc-server-name>@ml.xcc-port-@ml.app-name-xcc</xdbc-server-name>
      <port>@ml.xcc-port</port>
      <database name="@ml.content-db"/>
      <modules name="@ml.modules-db"/>
      <root>@ml.modules-root</root>
      <authentication>digest</authentication>
    </xdbc-server>
  </xdbc-servers>

  <!--
      Forest Assignments
      These will be used only if content-forests-per-host is not available.
  -->
  <assignments
      xmlns="http://marklogic.com/xdmp/assignments"
      xsi:schemaLocation="http://marklogic.com/xdmp/assignments assignments.xsd">
    <assignment>
      <forest-name>@ml.content-db-1</forest-name>
      <data-directory>/mldata1</data-directory>
    </assignment>
    <assignment>
      <forest-name>@ml.content-db-2</forest-name>
      <data-directory>/mldata1</data-directory>
    </assignment>
    <assignment>
      <forest-name>@ml.content-db-3</forest-name>
      <data-directory>/mldata2</data-directory>
    </assignment>
    <assignment>
      <forest-name>@ml.content-db-4</forest-name>
      <data-directory>/mldata2</data-directory>
    </assignment>
    <assignment>
      <forest-name>@ml.content-db-5</forest-name>
      <data-directory>/mldata3</data-directory>
    </assignment>
    <assignment>
      <forest-name>@ml.content-db-6</forest-name>
      <data-directory>/mldata3</data-directory>
    </assignment>
    <assignment>
      <forest-name>@ml.content-db-7</forest-name>
      <data-directory>/mldata4</data-directory>
    </assignment>
    <assignment>
      <forest-name>@ml.content-db-8</forest-name>
      <data-directory>/mldata4</data-directory>
    </assignment>
    @ml.test-content-db-assignment
    @ml.test-modules-db-assignment
    <assignment>
      <forest-name>@ml.modules-db</forest-name>
    </assignment>
    @ml.schemas-assignment
    @ml.triggers-assignment
  </assignments>

  <!--
    =========================================================
    Databases that are created as part of the application
    Add any database configuration or indexes here
      =========================================================
  -->
  <databases
      xmlns="http://marklogic.com/xdmp/database"
      xsi:schemaLocation="http://marklogic.com/xdmp/database database.xsd">
    <!--Application Database Configuration-->
    @ml.test-content-db-xml
    <database>
      <database-name>@ml.content-db</database-name>
      <forests-per-host>@ml.content-forests-per-host</forests-per-host>
      @ml.schemas-mapping
      @ml.triggers-mapping
      <forests>
        <forest-id name="@ml.content-db-1"/>
        <forest-id name="@ml.content-db-2"/>
        <forest-id name="@ml.content-db-3"/>
        <forest-id name="@ml.content-db-4"/>
        <forest-id name="@ml.content-db-5"/>
        <forest-id name="@ml.content-db-6"/>
        <forest-id name="@ml.content-db-7"/>
        <forest-id name="@ml.content-db-8"/>
      </forests>
      <stemmed-searches>basic</stemmed-searches>
      <word-searches>false</word-searches>
      <word-positions>true</word-positions>
      <fast-phrase-searches>true</fast-phrase-searches>
      <fast-reverse-searches>true</fast-reverse-searches>
      <fast-case-sensitive-searches>false</fast-case-sensitive-searches>
      <fast-diacritic-sensitive-searches>false</fast-diacritic-sensitive-searches>
      <fast-element-word-searches>true</fast-element-word-searches>
      <element-word-positions>true</element-word-positions>
      <fast-element-phrase-searches>false</fast-element-phrase-searches>
      <element-value-positions>true</element-value-positions>
      <attribute-value-positions>true</attribute-value-positions>
      <three-character-searches>true</three-character-searches>
      <three-character-word-positions>false</three-character-word-positions>
      <fast-element-character-searches>false</fast-element-character-searches>
      <trailing-wildcard-searches>true</trailing-wildcard-searches>
      <trailing-wildcard-word-positions>false</trailing-wildcard-word-positions>
      <fast-element-trailing-wildcard-searches>false</fast-element-trailing-wildcard-searches>
      <word-lexicons/>
      <two-character-searches>false</two-character-searches>
      <one-character-searches>false</one-character-searches>
      <uri-lexicon>true</uri-lexicon>
      <collection-lexicon>true</collection-lexicon>
      <directory-creation>manual</directory-creation>
      <maintain-last-modified>false</maintain-last-modified>
      <path-namespaces>
        <path-namespace>
          <prefix>va</prefix>
          <namespace-uri>ns://va.gov/2012/ip401</namespace-uri>
        </path-namespace>

        <path-namespace>
          <prefix>enr</prefix>
          <namespace-uri>ns://va.gov/2012/ip401/enrichment</namespace-uri>
        </path-namespace>
      </path-namespaces>

      <range-path-indexes>
        <range-path-index>
          <scalar-type>int</scalar-type>
          <path-expression>/va:vpr/va:results/va:demographics/va:patient/va:dob</path-expression>
          <collation/>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>string</scalar-type>
          <path-expression>/va:vpr/va:results/va:reactions/va:allergy/va:drugIngredients/va:drugIngredient/va:drugIngredient-name</path-expression>
          <collation>http://marklogic.com/collation/codepoint</collation>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>string</scalar-type>
          <path-expression>/va:vpr/va:meta/va:id</path-expression>
          <collation>http://marklogic.com/collation/codepoint</collation>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>string</scalar-type>
          <path-expression>/va:vpr/va:results/va:patientTreatments/va:patientTreatment/va:fld501/va:movementRecord/va:transferDate</path-expression>
          <collation>http://marklogic.com/collation/codepoint</collation>
          <range-value-positions>false</range-value-positions>
          <invalid-values>ignore</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>string</scalar-type>
          <collation>http://marklogic.com/collation/codepoint</collation>
          <path-expression>/va:vpr/va:meta/va:enrichment/enr:events/enr:eventDate/enr:diagnosis/@type</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>string</scalar-type>
          <collation>http://marklogic.com/collation/codepoint</collation>
          <path-expression>/va:vpr/va:meta/va:enrichment/enr:events/enr:eventDate/enr:drug/@type</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>string</scalar-type>
          <collation>http://marklogic.com/collation/codepoint</collation>
          <path-expression>/va:vpr/va:meta/va:enrichment/enr:events/enr:eventDate/enr:toxin/@type</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>string</scalar-type>
          <collation>http://marklogic.com/collation/codepoint</collation>
          <path-expression>/va:vpr/va:meta/va:enrichment/enr:events/enr:eventDate/enr:disease/@type</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>string</scalar-type>
          <collation>http://marklogic.com/collation/codepoint</collation>
          <path-expression>/va:vpr/va:meta/va:enrichment/enr:events/enr:eventDate/enr:diagnosis[@type="HeartDisease"]/@name</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>string</scalar-type>
          <collation>http://marklogic.com/collation/codepoint</collation>
          <path-expression>/va:vpr/va:meta/va:enrichment/enr:events/enr:eventDate/enr:diagnosis[@type="depression"]/@name</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>string</scalar-type>
          <collation>http://marklogic.com/collation/codepoint</collation>
          <path-expression>/va:vpr/va:meta/va:enrichment/enr:events/enr:eventDate/enr:diagnosis[@type="cvd"]/@name</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>string</scalar-type>
          <collation>http://marklogic.com/collation/codepoint</collation>
          <path-expression>/va:vpr/va:meta/va:enrichment/enr:events/enr:eventDate/enr:drug[@type="AntiPsychotic"]/@name</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>string</scalar-type>
          <collation>http://marklogic.com/collation/codepoint</collation>
          <path-expression>/va:vpr/va:meta/va:enrichment/enr:events/enr:eventDate/enr:drug[@type="AtypicalAntiPsychotic"]/@name</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>string</scalar-type>
          <collation>http://marklogic.com/collation/codepoint</collation>
          <path-expression>/va:vpr/va:meta/va:enrichment/enr:events/enr:eventDate/enr:drug[@type="AntiDepressant"]/@name</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>string</scalar-type>
          <collation>http://marklogic.com/collation/codepoint</collation>
          <path-expression>/va:vpr/va:meta/va:enrichment/enr:events/enr:eventDate/enr:toxin[@type="all"]/@name</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>string</scalar-type>
          <collation>http://marklogic.com/collation/codepoint</collation>
          <path-expression>/va:vpr/va:meta/va:enrichment/enr:events/enr:eventDate/enr:disease[@type="infectious"]/@name</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>int</scalar-type>
          <collation/>
          <path-expression>/va:vpr/va:results/va:reactions/@total</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
         <range-path-index>
           <scalar-type>int</scalar-type>
           <path-expression>/va:vpr/va:results/va:skinTests/@total</path-expression>
           <collation/>
           <range-value-positions>false</range-value-positions>
           <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>float</scalar-type>
          <collation/>
          <path-expression>/va:vpr/va:results/va:reactions/va:allergy/va:entered</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>float</scalar-type>
          <collation/>
          <path-expression>/va:vpr/va:results/va:vitals/va:vital/va:entered</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>float</scalar-type>
          <collation/>
          <path-expression>/va:vpr/va:results/va:vitals/va:vital/va:taken</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>int</scalar-type>
          <collation/>
          <path-expression>/va:vpr/va:results/va:appointments/@total</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>float</scalar-type>
          <collation/>
          <path-expression>/va:vpr/va:results/va:appointments/va:appointment/va:dateTime</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>int</scalar-type>
          <collation/>
          <path-expression>/va:vpr/va:results/va:consults/@total</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>float</scalar-type>
          <collation/>
          <path-expression>/va:vpr/va:results/va:consults/va:consult/va:requested</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>int</scalar-type>
          <collation/>
          <path-expression>/va:vpr/va:results/va:documents/@total</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>float</scalar-type>
          <collation/>
          <path-expression>/va:vpr/va:results/va:documents/va:document/va:referenceDateTime</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>int</scalar-type>
          <collation/>
          <path-expression>/va:vpr/va:results/va:educationTopics/@total</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>float</scalar-type>
          <collation/>
          <path-expression>/va:vpr/va:results/va:educationTopics/va:educationTopic/va:dateTime</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>int</scalar-type>
          <collation/>
          <path-expression>/va:vpr/va:results/va:exams/@total</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>float</scalar-type>
          <collation/>
          <path-expression>/va:vpr/va:results/va:exams/va:exam/va:dateTime</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>int</scalar-type>
          <collation/>
          <path-expression>/va:vpr/va:results/va:healthFactors/@total</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>float</scalar-type>
          <collation/>
          <path-expression>/va:vpr/va:results/va:healthFactors/va:factor/va:recorded</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>int</scalar-type>
          <collation/>
          <path-expression>/va:vpr/va:results/va:flags/@total</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>float</scalar-type>
          <collation/>
          <path-expression>/va:vpr/va:results/va:flags/va:flag/va:dateTime</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>float</scalar-type>
          <collation/>
          <path-expression>/va:vpr/va:results/va:skinTests/va:skinTest/va:dateTime</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>float</scalar-type>
          <collation/>
          <path-expression>/va:vpr/va:results/va:visits/va:visit/va:dateTime</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>float</scalar-type>
          <collation/>
          <path-expression>/va:vpr/va:results/va:visits/va:visit/va:arrivalDateTime</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>int</scalar-type>
          <collation/>
          <path-expression>/va:vpr/va:results/va:immunizations/@total</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>float</scalar-type>
          <collation/>
          <path-expression>/va:vpr/va:results/va:immunizations/va:immunization/va:administered</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>int</scalar-type>
          <collation/>
          <path-expression>/va:vpr/va:results/va:insurancePolicies/@total</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>float</scalar-type>
          <collation/>
          <path-expression>/va:vpr/va:results/va:insurancePolicies/va:insurancePolicy/va:effectiveDate</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>int</scalar-type>
          <collation/>
          <path-expression>/va:vpr/va:results/va:labs/@total</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>float</scalar-type>
          <collation/>
          <path-expression>/va:vpr/va:results/va:labs/va:lab/va:collected</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>int</scalar-type>
          <collation/>
          <path-expression>/va:vpr/va:results/va:meds/@total</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>float</scalar-type>
          <collation/>
          <path-expression>/va:vpr/va:results/va:meds/va:med/va:start</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>float</scalar-type>
          <collation/>
          <path-expression>/va:vpr/va:results/va:meds/va:med/va:lastFilled</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>float</scalar-type>
          <collation/>
          <path-expression>/va:vpr/va:results/va:problems/va:problem/va:onset</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>float</scalar-type>
          <collation/>
          <path-expression>/va:vpr/va:results/va:procedures/va:procedure/va:dateTime</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>string</scalar-type>
          <collation>http://marklogic.com/collation/codepoint</collation>
          <path-expression>/va:vpr/va:results/va:reactions/va:allergy/va:facility/va:facility-name</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>int</scalar-type>
          <collation/>
          <path-expression>/va:vpr/va:results/va:observations/@total</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>int</scalar-type>
          <collation/>
          <path-expression>/va:vpr/va:results/va:problems/@total</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>int</scalar-type>
          <collation/>
          <path-expression>/va:vpr/va:results/va:procedures/@total</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>int</scalar-type>
          <collation/>
          <path-expression>/va:vpr/va:results/va:visits/@total</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>int</scalar-type>
          <collation/>
          <path-expression>/va:vpr/va:results/va:vitals/@total</path-expression>
          <range-value-positions>false</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>string</scalar-type>
          <collation>http://marklogic.com/collation/codepoint</collation>
          <path-expression>/va:vpr/va:results/va:visits/va:visit/va:facility/va:facility-name</path-expression>
          <range-value-positions>true</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>string</scalar-type>
          <collation>http://marklogic.com/collation/codepoint</collation>
          <path-expression>/va:vpr/va:results/va:procedures/va:procedure/va:type/va:type-name</path-expression>
          <range-value-positions>true</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>string</scalar-type>
          <collation>http://marklogic.com/collation/codepoint</collation>
          <path-expression>/va:vpr/va:results/va:patientTreatments/va:treatments/va:treatment</path-expression>
          <range-value-positions>true</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>

        <range-path-index>
          <scalar-type>string</scalar-type>
          <collation>http://marklogic.com/collation/codepoint</collation>
          <path-expression>/va:vpr/va:results/va:patientTreatments/va:highLevelPsychClasses/va:highLevelPsychClassInd</path-expression>
          <range-value-positions>true</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>string</scalar-type>
          <collation>http://marklogic.com/collation/codepoint</collation>
          <path-expression>/va:vpr/va:results/va:patientTreatments/va:patientTreatment/va:psychiatryClassSeverity</path-expression>
          <range-value-positions>true</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>string</scalar-type>
          <collation>http://marklogic.com/collation/codepoint</collation>
          <path-expression>/va:vpr/va:results/va:patientTreatments/va:patientTreatment/va:substanceAbuse</path-expression>
          <range-value-positions>true</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>
        <range-path-index>
          <scalar-type>string</scalar-type>
          <collation>http://marklogic.com/collation/codepoint</collation>
          <path-expression>/va:vpr/va:results/va:patientTreatments/va:patientTreatment/va:suicideSelfInflictIndicator</path-expression>
          <range-value-positions>true</range-value-positions>
          <invalid-values>reject</invalid-values>
        </range-path-index>

      </range-path-indexes>

      <fields>
        <field>
          <field-name/>
          <include-root>true</include-root>
          <word-lexicons/>
          <included-elements/>
          <excluded-elements/>
        </field>
        <field>
          <field-name>unstructured</field-name>
          <include-root>false</include-root>
          <word-lexicons/>
          <included-elements>
            <included-element>
              <namespace-uri>ns://va.gov/2012/ip401</namespace-uri>
              <localname>content</localname>
              <weight>1.0</weight>
              <attribute-namespace-uri/>
              <attribute-localname/>
              <attribute-value/>
            </included-element>
          </included-elements>
          <excluded-elements/>
        </field>
      </fields>

      <range-element-indexes>
        <range-element-index>
          <scalar-type>string</scalar-type>
          <namespace-uri>ns://va.gov/2012/ip401</namespace-uri>
          <localname>facility-name facility-code gender icd maritalStatus procedure-name site medID principalDiagnosis med-name veteran primaryRace ageAtRx ageAtVisit ageAtDiagnosis ageAtProcedure reason-code</localname>
          <collation>http://marklogic.com/collation/codepoint</collation>
          <range-value-positions>true</range-value-positions>
        </range-element-index>
        <range-element-index>
          <scalar-type>string</scalar-type>
          <namespace-uri>ns://va.gov/2012/ip401/enrichment</namespace-uri>
          <localname>suicideIndicator suicideMedication suicideIllicitDrug normalizedProblem drinkingIndicator</localname>
          <collation>http://marklogic.com/collation/codepoint</collation>
          <range-value-positions>true</range-value-positions>
        </range-element-index>
        <range-element-index>
            <scalar-type>dateTime</scalar-type>
            <namespace-uri>ns://va.gov/2012/ip401</namespace-uri>
            <localname>ingested</localname>
            <range-value-positions>false</range-value-positions>
            <invalid-values>reject</invalid-values>
        </range-element-index>
      </range-element-indexes>

      <range-element-attribute-indexes>
        <range-element-attribute-index>
          <scalar-type>int</scalar-type>
          <parent-namespace-uri>ns://va.gov/2012/ip401</parent-namespace-uri>
          <parent-localname>meds vitals immunizations documents visits labs observations problems appointments procedures consults reactions flags skinTests exams educationTopics insurancePolicies healthFactors</parent-localname>
          <namespace-uri/>
          <localname>total</localname>
          <range-value-positions>false</range-value-positions>
        </range-element-attribute-index>
        <range-element-attribute-index>
          <scalar-type>string</scalar-type>
          <parent-namespace-uri>ns://va.gov/2012/ip401/ontology</parent-namespace-uri>
          <parent-localname>concept</parent-localname>
          <namespace-uri/>
          <localname>code</localname>
          <collation>http://marklogic.com/collation/codepoint</collation>
          <range-value-positions>false</range-value-positions>
        </range-element-attribute-index>
        <range-element-attribute-index>
          <scalar-type>string</scalar-type>
          <parent-namespace-uri>ns://va.gov/2012/ip401/ontology</parent-namespace-uri>
          <parent-localname>concept</parent-localname>
          <namespace-uri/>
          <localname>description</localname>
          <collation>http://marklogic.com/collation/codepoint</collation>
          <range-value-positions>false</range-value-positions>
        </range-element-attribute-index>
        <range-element-attribute-index>
          <scalar-type>string</scalar-type>
          <parent-namespace-uri>ns://va.gov/2012/ip401/ontology</parent-namespace-uri>
          <parent-localname>concept</parent-localname>
          <namespace-uri/>
          <localname>label</localname>
          <collation>http://marklogic.com/collation/codepoint</collation>
          <range-value-positions>false</range-value-positions>
        </range-element-attribute-index>
        <range-element-attribute-index>
          <scalar-type>string</scalar-type>
          <parent-namespace-uri>ns://va.gov/2012/ip401</parent-namespace-uri>
          <parent-localname>icd</parent-localname>
          <namespace-uri/>
          <localname>label</localname>
          <collation>http://marklogic.com/collation/codepoint</collation>
          <range-value-positions>false</range-value-positions>
        </range-element-attribute-index>

        <range-element-attribute-index>
          <scalar-type>string</scalar-type>
          <parent-namespace-uri>ns://va.gov/2012/ip401</parent-namespace-uri>
          <parent-localname>class</parent-localname>
          <namespace-uri/>
          <localname>code</localname>
          <collation>http://marklogic.com/collation/codepoint</collation>
          <range-value-positions>false</range-value-positions>
        </range-element-attribute-index>
        <range-element-attribute-index>
          <scalar-type>string</scalar-type>
          <parent-namespace-uri>ns://va.gov/2012/ip401</parent-namespace-uri>
          <parent-localname>class</parent-localname>
          <namespace-uri/>
          <localname>label</localname>
          <collation>http://marklogic.com/collation/codepoint</collation>
          <range-value-positions>false</range-value-positions>
        </range-element-attribute-index>

        <range-element-attribute-index>
          <scalar-type>string</scalar-type>
          <parent-namespace-uri>ns://va.gov/2012/ip401/ontology/rxnorm</parent-namespace-uri>
          <parent-localname>concept</parent-localname>
          <namespace-uri/>
          <localname>label</localname>
          <collation>http://marklogic.com/collation/codepoint</collation>
          <range-value-positions>false</range-value-positions>
        </range-element-attribute-index>
        <range-element-attribute-index>
          <scalar-type>string</scalar-type>
          <parent-namespace-uri>ns://va.gov/2012/ip401/ontology/rxnorm</parent-namespace-uri>
          <parent-localname>concept</parent-localname>
          <namespace-uri/>
          <localname>code</localname>
          <collation>http://marklogic.com/collation/codepoint</collation>
          <range-value-positions>false</range-value-positions>
        </range-element-attribute-index>
        <range-element-attribute-index>
          <scalar-type>string</scalar-type>
          <parent-namespace-uri>ns://va.gov/2012/ip401/ontology/rxnorm</parent-namespace-uri>
          <parent-localname>concept</parent-localname>
          <namespace-uri/>
          <localname>dea-schedule</localname>
          <collation>http://marklogic.com/collation/codepoint</collation>
          <range-value-positions>false</range-value-positions>
        </range-element-attribute-index>
        <range-element-attribute-index>
          <scalar-type>string</scalar-type>
          <parent-namespace-uri>ns://va.gov/2012/ip401/ontology/rxnorm</parent-namespace-uri>
          <parent-localname>concept</parent-localname>
          <namespace-uri/>
          <localname>vadc-code</localname>
          <collation>http://marklogic.com/collation/codepoint</collation>
          <range-value-positions>false</range-value-positions>
        </range-element-attribute-index>
        <range-element-attribute-index>
          <scalar-type>string</scalar-type>
          <parent-namespace-uri>ns://va.gov/2012/ip401/ontology/rxnorm</parent-namespace-uri>
          <parent-localname>concept</parent-localname>
          <namespace-uri/>
          <localname>vadc-label</localname>
          <collation>http://marklogic.com/collation/codepoint</collation>
          <range-value-positions>false</range-value-positions>
        </range-element-attribute-index>

        <range-element-attribute-index>
          <scalar-type>string</scalar-type>
          <parent-namespace-uri>ns://va.gov/2012/ip401/enrichment</parent-namespace-uri>
          <parent-localname>loinc</parent-localname>
          <namespace-uri/>
          <localname>label</localname>
          <collation>http://marklogic.com/collation/codepoint</collation>
          <range-value-positions>false</range-value-positions>
        </range-element-attribute-index>
        <range-element-attribute-index>
          <scalar-type>string</scalar-type>
          <parent-namespace-uri>ns://va.gov/2012/ip401/enrichment</parent-namespace-uri>
          <parent-localname>loinc</parent-localname>
          <namespace-uri/>
          <localname>code</localname>
          <collation>http://marklogic.com/collation/codepoint</collation>
          <range-value-positions>false</range-value-positions>
        </range-element-attribute-index>

      </range-element-attribute-indexes>

      <range-field-indexes>
<!--
        <range-field-index>
          <scalar-type>date</scalar-type>
          <field-name>sample</field-name>
          <collation/>
          <range-value-positions>false</range-value-positions>
        </range-field-index>
-->
      </range-field-indexes>

      <geospatial-element-attribute-pair-indexes>
        <geospatial-element-attribute-pair-index>
          <parent-namespace-uri>ns://va.gov/2012/ip401</parent-namespace-uri>
          <parent-localname>address</parent-localname>
          <latitude-namespace-uri>http://marklogic.com/geocode</latitude-namespace-uri>
          <latitude-localname>lat</latitude-localname>
          <longitude-namespace-uri>http://marklogic.com/geocode</longitude-namespace-uri>
          <longitude-localname>lon</longitude-localname>
          <coordinate-system>wgs84</coordinate-system>
          <range-value-positions>false</range-value-positions>
        </geospatial-element-attribute-pair-index>

        <geospatial-element-attribute-pair-index>
          <parent-namespace-uri>ns://va.gov/2012/ip401</parent-namespace-uri>
          <parent-localname>facility-location</parent-localname>
          <latitude-namespace-uri>http://marklogic.com/geocode</latitude-namespace-uri>
          <latitude-localname>lat</latitude-localname>
          <longitude-namespace-uri>http://marklogic.com/geocode</longitude-namespace-uri>
          <longitude-localname>lon</longitude-localname>
          <coordinate-system>wgs84</coordinate-system>
          <range-value-positions>false</range-value-positions>
        </geospatial-element-attribute-pair-index>
      </geospatial-element-attribute-pair-indexes>

      <geospatial-element-pair-indexes>
<!--
        Sample for:
          <geo xmlns="http://marklogic.com/ns/sample">
            <lat>37.237162</lat>
            <lon>-115.8099747</lon>
          </geo>

        <geospatial-element-pair-index>
          <parent-namespace-uri>http://marklogic.com/ns/sample</parent-namespace-uri>
          <parent-localname>geo</parent-localname>
          <latitude-namespace-uri>http://marklogic.com/ns/sample</latitude-namespace-uri>
          <latitude-localname>lat</latitude-localname>
          <longitude-namespace-uri>http://marklogic.com/ns/sample</longitude-namespace-uri>
          <longitude-localname>lon</longitude-localname>
          <coordinate-system>wgs84</coordinate-system>
          <range-value-positions>true</range-value-positions>
        </geospatial-element-pair-index>
-->
      </geospatial-element-pair-indexes>

      <geospatial-element-child-indexes>
<!--
        Sample for:
          <geo xmlns="http://marklogic.com/ns/sample">
            <pos>37.237162,-115.8099747</pos>
          </geo>

        <geospatial-element-child-index>
          <parent-namespace-uri>http://marklogic.com/ns/sample</parent-namespace-uri>
          <parent-localname>geo</parent-localname>
          <namespace-uri>http://marklogic.com/ns/sample</namespace-uri>
          <localname>pos</localname>
          <coordinate-system>wgs84</coordinate-system>
          <point-format>point</point-format>
          <range-value-positions>false</range-value-positions>
        </geospatial-element-child-index>
-->
      </geospatial-element-child-indexes>
      <!-- TODO exclude ontology elements, or put into a new field? -->
    </database>

    <!--Create Application Modules Database-->
    <database>
      <database-name>@ml.modules-db</database-name>
      <forests>
        <forest-id name="@ml.modules-db"/>
      </forests>
      <stemmed-searches>off</stemmed-searches>
      <word-searches>false</word-searches>
      <word-positions>false</word-positions>
      <fast-phrase-searches>false</fast-phrase-searches>
      <fast-reverse-searches>false</fast-reverse-searches>
      <fast-case-sensitive-searches>false</fast-case-sensitive-searches>
      <fast-diacritic-sensitive-searches>false</fast-diacritic-sensitive-searches>
      <fast-element-word-searches>false</fast-element-word-searches>
      <element-word-positions>false</element-word-positions>
      <fast-element-phrase-searches>false</fast-element-phrase-searches>
      <element-value-positions>false</element-value-positions>
      <attribute-value-positions>false</attribute-value-positions>
      <three-character-searches>false</three-character-searches>
      <three-character-word-positions>false</three-character-word-positions>
      <fast-element-character-searches>false</fast-element-character-searches>
      <trailing-wildcard-searches>false</trailing-wildcard-searches>
      <trailing-wildcard-word-positions>false</trailing-wildcard-word-positions>
      <fast-element-trailing-wildcard-searches>false</fast-element-trailing-wildcard-searches>
      <word-lexicons/>
      <two-character-searches>false</two-character-searches>
      <one-character-searches>false</one-character-searches>
      <uri-lexicon>false</uri-lexicon>
      <collection-lexicon>false</collection-lexicon>
      <directory-creation>automatic</directory-creation>
      <maintain-last-modified>false</maintain-last-modified>
    </database>
    <!--Create Test Modules Database-->
    @ml.test-modules-db-xml
    <!--Create a Triggers Database-->
    @ml.triggers-db-xml
    @ml.schemas-db-xml
  </databases>

  <privileges xmlns="http://marklogic.com/xdmp/security">
    <privilege>
      <privilege-name>@ml.app-logged-in-privilege</privilege-name>
      <action>ns://va.gov/2012/ip401/logged-in</action>
      <kind>execute</kind>
    </privilege>


    <privilege>
      <privilege-name>users-uri</privilege-name>
      <action>/users/</action>
      <kind>uri</kind>
    </privilege>

  </privileges>

  <roles xmlns="http://marklogic.com/xdmp/security">
    <role>
      <role-name>@ml.app-role</role-name>
      <description>Just enough privileges to make roxy work.</description>
      <role-names>
      </role-names>
      <permissions>
        <permission>
          <capability>execute</capability>
          <role-name>@ml.app-role</role-name>
        </permission>
        <permission>
          <capability>update</capability>
          <role-name>@ml.app-role</role-name>
        </permission>
        <permission>
          <capability>insert</capability>
          <role-name>@ml.app-role</role-name>
        </permission>
        <permission>
          <capability>read</capability>
          <role-name>@ml.app-role</role-name>
        </permission>
      </permissions>
      <privileges>
        <privilege>
          <privilege-name>xdmp:invoke</privilege-name>
        </privilege>
        <privilege>
          <privilege-name>xdmp:value</privilege-name>
        </privilege>
      </privileges>
    </role>

    <role>
      <role-name>@ml.app-logged-in-role</role-name>
      <description>Logged-in users of @ml.app-name.</description>
      <role-names>
        <role-name>@ml.app-role</role-name>
      </role-names>
      <permissions>
        <permission>
          <capability>update</capability>
          <role-name>@ml.app-logged-in-role</role-name>
        </permission>
        <permission>
          <capability>insert</capability>
          <role-name>@ml.app-logged-in-role</role-name>
        </permission>
        <permission>
          <capability>read</capability>
          <role-name>@ml.app-logged-in-role</role-name>
        </permission>
      </permissions>
      <collections>
      </collections>
      <privileges>
        <privilege>
          <privilege-name>@ml.app-logged-in-privilege</privilege-name>
        </privilege>
        <privilege>
          <privilege-name>admin-module-read</privilege-name>
        </privilege>
        <privilege>
          <privilege-name>xdmp:add-response-header</privilege-name>
        </privilege>
        <privilege>
          <privilege-name>xdmp:get-server-field</privilege-name>
        </privilege>
        <privilege>
          <privilege-name>xdmp:with-namespaces</privilege-name>
        </privilege>
        <privilege>
          <privilege-name>xdmp:xslt-invoke</privilege-name>
        </privilege>
        <privilege>
          <privilege-name>xdmp:alert-user</privilege-name>
        </privilege>
        <privilege>
          <privilege-name>users-uri</privilege-name>
        </privilege>
      </privileges>
    </role>
  </roles>

  <users xmlns="http://marklogic.com/xdmp/security">
    <user>
      <user-name>@ml.app-name-user</user-name>
      <description>A user for the @ml.app-name application</description>
      <password>password</password>
      <role-names>
        <role-names>@ml.app-role</role-names>
      </role-names>
      <permissions/>
      <collections/>
    </user>
  </users>

  <amps xmlns="http://marklogic.com/xdmp/security"/>

</configuration>
